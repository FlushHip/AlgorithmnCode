# 数据结构

- KMP算法，`next`数组：**对应位置前缀和后缀的最长公共部分长度**
- 多路归并排序
- 图的基本概念
- 最短路径，最小生成树的生成过程
- 哈希冲突解决方法
- B树，B+树的概念及操作
- 平衡二叉树的旋转

# 计算机组成原理

## 基本概念

- 计算机性能

- |                           机器字长                           |                           存储字长                           |      指令字长      |
  | :----------------------------------------------------------: | :----------------------------------------------------------: | :----------------: |
  | CPU一次能处理的最多位数据长度，通常与CPU的通用寄存器位数有关 | 存储器中一个存储单元(存储地址)所存储的二进制代码的位数，即存储器中的MDR的位数 | 计算机指令字的位数 |

- $$
  2^{15}=32768,2^{16}=65536
  $$

- FLOPS，`K->M->G->T->P->E->Z`

## 数据表示与运算

- 原码，补码，移码比较

- IEEE754浮点数格式， float，double，浮点数范围，浮点数表示

  - float 8 位阶码，double 11 位阶码

  - $$
    1.m*2^{M-127},M\in[0, 255]
    $$

  - 阶码全0表示无穷小(**-127**)，全1表示无穷大(**128**)，因此阶码范围`[-126, 127]`

  - 绝对值最小规约数
    $$
    \pm 1.0*2^{-126}
    $$
    
- 绝对值最大规约数
    $$
    \pm (2-2^{-23})*2^{127}
    $$
    
  - NaN：指数全一，尾数非全零

- 浮点数加法

  1. 对阶，`small -> big`
  2. 尾数相加
  3. 尾数规格化
     - 左归，阶码减少，不可能溢出
     - 右归，阶码增加，有可能溢出
  4. 舍入
  5. 溢出判断
     - 上溢，异常，中断
     - 下溢，机器零处理

- 两个无符号数相加OF可能为1（溢出），相减CF可能为1（小-大，借位）

- 定点补码溢出判断（机器级判断）
  - 单符号：操作数符号相同，结果符号与操作数符号不同
  - 双符号：双符号位符号不同表示溢出，且最高符号位表示最终运算结果符号

## 存储系统

- SRAM，DRAM，ROM，随机，只读

  - SRAM：双稳态触发器
  - DRAM：电容，需要刷新
  - ROM：Flash，常用于U盘，固态硬盘，写入前得先擦除

- 主存与CPU的连接，特别是DRAM片选时，行列地址线复用

- 双端RAM

- Cache替换策略LRU算法需要加额外的位
  $$
  log_2n
  $$

## 指令系统

- 寻址方式，**间址扩大寻址范围**

  - 立即寻址（操作数），直接寻址（地址）
  - 寄存器间接寻址，存储器间接寻址
  - 基址寻址（程序段），变址寻址（数组）
  - 相对寻址，注意取指后PC会+1，偏移位置的计算
  - 堆栈寻址，参数传递

- |      区别      |     CISC     |               RISC               |
  | :------------: | :----------: | :------------------------------: |
  |    指令系统    |     复杂     |               简单               |
  |    指令数目    |      多      |                少                |
  |    指令字长    |    不固定    |               固定               |
  |    控制方式    |    微程序    |           组合逻辑电路           |
  | 通用寄存器数量 |      少      |                多                |
  |    目标代码    | 难以编译优化 |       可以编译优化，效率高       |
  | 各指令执行时间 |   相差较大   | 有指令流水线，多在一个时钟周期内 |

## CPU

- 运算器构成元素
  - ALU
  - 累加寄存器
  - 通用寄存器
  - PSW
  - 暂存寄存器
  
- 控制器构成元素
  - PC
  - IR
  - MAR
  - MDR
  - 指令译码器
  
- 用户可见寄存器
  - 通用寄存器
  - PC
  - ACC
  - PSW
  
- **指令周期**包含若干**机器周期**，机器周期包含若干**时钟周期**

- 控制存储器（ROM）

- 微指令的编码方式

  - **直接编码**，长度长`n`
  - **字段直接编码**：互斥指令归一类，长度短`log (n + 1)`，需要译码
  - 字段间接编码

- | 水平微指令 | 垂直微指令 |
  | :--------: | :--------: |
  |            |            |

- 指令流水线

  - 超标量流水线
  - 超流水线

- 流水线阻塞因素

  - 结构相关：竞争同一资源导致，解决：
    - 指令和数据分离
    - 延后时钟周期
  - 数据相关：同步问题，解决：
    - 延后时钟周期
    - 数据旁路
  - 控制相关：跳转指令，解决：
    - 分支预测
    - 指令预取

## 总线

- 总线分类（按功能划分）
  - 片内总线：CPU内部
  - 系统总线：计算机系统内
  - 通信总线：计算机之间
- 总线两种定时方式
  - 同步通信：统一时钟信号管理
  - 异步通信：”握手“，”应答“。常用于通信双方速度差异较大的设备之间
    - 不互锁：啥也不管
    - 半互锁：半双工
    - 全互锁：三次握手
- 总线性能指标
  - 总线时钟周期：机器时钟周期
  - 总线时钟频率：总线时钟周期的倒数
  - 总线工作周期：一次总线操作需要多少个总线时钟周期
  - 总线工作频率：总线工作周期的倒数
- 总线复用：地址/信号线复用
- 总线标准（趋势：串行总线代替并行总线）
  - 系统总线，FBS，QPI（串行总线，Intel提出）
  - 局部总线，PCI（并行总线），PCI-E（串行总线）
  - 设备总线
    - 并行总线：SCSI，IDE
    - 串行总线：USB，SATA

## I/O系统

- RAID
  - RAID**0**：内容分开存
  - RAID**1**：内容冗余存
  - RAID**2**：海明码校验纠错
  - RAID**3~5**：奇偶校验
- I/O接口，设备中断码传递通过数据总线，CPU检测中断信号通过控制总线，I/O接口有很多I/O端口
- I/O接口中的控制寄存器和状态寄存器可以复用
- 中断处理过程
  - 中断向量，中断向量地址，硬件产生向量地址，由向量地址找到向量
  - 中断隐指令
    - 关中断
    - 保存断点（PC，PSW）
    - 找到中断服务程序
  - 保存现场*（和 PSW（多重中断））*
  - 中断服务程序
  - *关中断（多重中断）*
  - 恢复现场*（和 PSW（多重中断））*
  - 开中断
  - 中断最后一条指令为返回指令
- 中断到来顺序和中断响应顺序没有关系，中断响应顺序根据硬件排队器和中断屏蔽字实现
- 中断检查发生在每条指令执行末端，也就是中断周期内检查。所以外中断有延时，而异常没有延时

# 操作系统

## 操作系统发展历程

## 进程管理

- 作业调度算法

## 内存管理

## 文件管理

- 逻辑文件，有结构文件，顺序文件，索引文件，索引顺序文件
- 物理结构，顺序存储，显式链式存储，隐式链式存储，索引存储（i节点）

## I/O管理

- I/O层次，用户层，设备独立层，驱动，中断

- DMA
- 通道

# 计算机网络

## 前置知识

- 协议模型，ISO，TCP/IP
- 奈奎斯特定理，香农定理
- 编码，曼切斯特编码

## 数据链路层

- 争用期，经典公式
- ARP协议

## 网络层

- IP数据包分片

- RIP，OSPF
- BGP

## 运输层

- 三次握手
- 四次挥手
- 拥塞控制，慢启动，拥塞避免，快重传，快恢复

## 应用层



